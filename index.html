<!doctype html>
<html lang="en">
  <head>
	<meta charset="utf-8">
    <link rel="stylesheet" href="openlayers/v3.1.1/css/ol.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <style>
	  h1{color:#33CCFF;}
	 #toolbox2       
	   { position:absolute; font-size: 14px;top:100px; left:640px; padding:5px; font-family: Arial Black,Arial Bold,Gadget,sans-serif; text-align: center; border-radius:4px; color:black; background: rgba(3, 107, 60, 0.5); z-index:100; }
	   #layerswitcher{text-align: left; color: white;}
	#Phoenix {
	color: 	#004C2E; 
	font-family: Arial Black,Arial Bold,Gadget,sans-serif;
	font-size: 12px;
	font-weight: bold;
	cursor: pointer;
	text-decoration: underline;
	}
	#Mesa {
	color: 	#004C2E;
	font-family: Arial Black,Arial Bold,Gadget,sans-serif;
	font-size: 12px;
	font-weight: bold;
	cursor: pointer;
	text-decoration: underline;
	}
	#Tempe {
	color: 	#004C2E;
	font-family: Arial Black,Arial Bold,Gadget,sans-serif;
	font-size: 12px;
	font-weight: bold;
	cursor: pointer;
	text-decoration: underline;
	}
		
    </style>
    <script src="openlayers/v3.1.1/build/ol.js" type="text/javascript"></script>
	<script src="openlayers/v3.1.1/ol/ol/pointer/pointerevent.js" type="text/javascript"></script>
	<script src="openlayers/v3.1.1/resources/bootstrap/js/bootstrap.js" type="text/javascript"></script>
	<script src="openlayers/v3.1.1/closure-library/closure/goog/ui/popup.js" type="text/javascript"></script>
	<script src="openlayers/v3.1.1/resources/jquery.min.js" type="text/javascript"></script>
    <title>Phoenix Metro Sustainability Initiatives</title>
  </head>
  <body>
	<div class="container">
	<div id="Explore" class="explore"></div>
    <div id="map" class="map"></div>
	        <div id="popup" class="ol-popup">
                <a href="#" id="popup-closer" class="ol-popup-closer"></a>
                <div id="popup-content" class="ol-popup-content"></div>
        </div>
      </div>
  	</div>
	
<div id="Phoenix"><a href='PhoenixInitiatives.html'>PHOENIX</a></div>
<div id="Mesa"><a href='MesaInitiatives.html'>MESA</a></div>
<div id="Tempe"><a href='TempeInitiatives.html'>TEMPE</a></div>

<div id="toolbox2"><h3>Click on a city <br>to see sustainability efforts</h3>
<ul type="none" id ="layerswitcher">
<li><h3>Quick View by City</h3></li>
<li><label><input type="checkbox" id="visible1" checked> Mesa</label></li>
<li><label><input type="checkbox" id="visible2" checked> Tempe</label></li>
<li><label><input type="checkbox" id="visible3" checked> Phoenix</label></li>
<li><label><input type="checkbox" id="visible" checked> See all</label></li>
</ul>
</div>	
    <script type="text/javascript">

var efforts = new ol.layer.Vector({
	source: new ol.source.GeoJSON({
		url: 'GeoJSON/AllEfforts.geojson'
	}),
	style: new ol.style.Style({
	image: new ol.style.Circle({
		radius: 3,
		fill: new ol.style.Fill({
		color: 'green'
		}),
		stroke: new ol.style.Stroke({
			color: 'black',
			width: 1})
	})
	})
	});
	efforts.setVisible(false);
	
    var container = document.getElementById('popup');
    var content   = document.getElementById('popup-content');
    var closer    = document.getElementById('popup-closer');
	
	closer.onclick = function() {
      container.style.display = 'none';
      closer.blur();
      return false;
    };
	
	var overlay = new ol.Overlay({
      element: container
    });
	
	var M = new ol.layer.Vector({
	source: new ol.source.GeoJSON({
		url: 'GeoJSON/MesaEfforts.geojson'
	}),
			style: new ol.style.Style({
		image: new ol.style.Circle({
				radius: 3,
				fill: new ol.style.Fill({
				color: 'green'
				}),
				stroke: new ol.style.Stroke({
					color: 'black',
					width: 1})
		})
		})
		});
		M.setVisible(false);
		
	var P = new ol.layer.Vector({
	source: new ol.source.GeoJSON({
		url: 'GeoJSON/PhoenixEfforts.geojson'
	}),
			style: new ol.style.Style({
		image: new ol.style.Circle({
				radius: 3,
				fill: new ol.style.Fill({
				color: 'green'
				}),
				stroke: new ol.style.Stroke({
					color: 'black',
					width: 1})
		})
		})
		});
		P.setVisible(false);
		
	var T = new ol.layer.Vector({
	source: new ol.source.GeoJSON({
		url: 'GeoJSON/TempeEfforts.geojson'
	}),
			style: new ol.style.Style({
		image: new ol.style.Circle({
				radius: 3,
				fill: new ol.style.Fill({
				color: 'green'
				}),
				stroke: new ol.style.Stroke({
					color: 'black',
					width: 1})
		})
		})
		});
		T.setVisible(false);
	
	  var Tempe = new ol.layer.Vector({
		source: new ol.source.GeoJSON({
			projection: 'EPSG:3857',
			url: 'GeoJSON/Tempe3857.geojson' 
		}),
		style: new ol.style.Style({
			stroke: new ol.style.Stroke({color: 'black', width: 3}),
			fill: new ol.style.Fill({color:'rgba(82,227,152,0.8)'})
		}),
	});
	var Phoenix = new ol.layer.Vector({
		source: new ol.source.GeoJSON({
			url: 'GeoJSON/Phoenix3857.geojson'
		}),
			style: new ol.style.Style({
				stroke: new ol.style.Stroke({color: 'black', width: 3}),
				fill: new ol.style.Fill({color:'rgba(177,228,250,0.7)'})
			}),
		});
		var Mesa = new ol.layer.Vector({
			source: new ol.source.GeoJSON({
				url: 'GeoJSON/Mesa3857.geojson'
			}),
			style: new ol.style.Style({
				stroke: new ol.style.Stroke({color: 'black', width: 3}),
				fill: new ol.style.Fill({color:'rgba(33,124,173,0.7)'})
			})
		});
      var map = new ol.Map({
        target: 'map',
        layers: [
		  new ol.layer.Tile({
			source: new ol.source.Stamen({layer: 'terrain-background'})
		  }),
		  new ol.layer.Tile({
			source: new ol.source.Stamen({layer: 'terrain-lines'})
		  }),
		Tempe,
		Phoenix,
		Mesa,
		efforts,
		M,
		T,
		P
		],
		overlays: [overlay],
        view: new ol.View({
          center: [-12462274.74916, 3975561.97282],
          zoom: 10.25
        }),
	});
	
var visible = new ol.dom.Input(document.getElementById('visible'));
visible.bindTo('checked', efforts, 'visible');

var visible1 = new ol.dom.Input(document.getElementById('visible1'));
visible1.bindTo('checked', M, 'visible');

var visible2 = new ol.dom.Input(document.getElementById('visible2'));
visible2.bindTo('checked', T, 'visible');

var visible3 = new ol.dom.Input(document.getElementById('visible3'));
visible3.bindTo('checked', P, 'visible');

var pos = [-12480420.00, 3979209.00];

var phx = new ol.Overlay({
  position: pos,
  element: document.getElementById('Phoenix'),
});
map.addOverlay(phx);

// document.getElementById("Phoenix").addEventListener("click", link);
// function link() {
// 	window.open("PhoenixInitiatives.html", "_parent");
// 	}

var pos1 = [-12446623,3951036];

var msa = new ol.Overlay({
  position: pos1,
  element: document.getElementById('Mesa')
});
map.addOverlay(msa);

// document.getElementById("Mesa").addEventListener("click", link1);
// function link1() {
// 	window.open("MesaInitiatives.html", "_parent");
// 	}

var pos2 = [-12464447,3949950];

var tem = new ol.Overlay({
  position: pos2,
  element: document.getElementById('Tempe')
});
map.addOverlay(tem);
// document.getElementById("Tempe").addEventListener("click", link2);
// function link2() {
// 	window.open("TempeInitiatives.html", "_parent");
// 	}
	
		var selectFeature = new ol.interaction.Select({
		condition: ol.events.condition.mouseMove,
		style: new ol.style.Style({
			fill: new ol.style.Fill({ color:'rgba(66,237,118,0.7)'}),
			stroke: new ol.style.Stroke({
				color: '#008000',
				width: 3
			})
		})
	});
	map.addInteraction(selectFeature);
	
	var zoomslider = new ol.control.ZoomSlider({});
	map.addControl(zoomslider);

    </script>
  </body>
</html>
